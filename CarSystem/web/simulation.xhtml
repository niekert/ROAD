<ui:composition template="WEB-INF/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                xmlns:c="http://java.sun.com/jstl/core">
    <ui:param name="title" value="Car Simulator"/>

    <script type="text/javascript">
        function sendEcho()
        {
            if ("WebSocket" in window)
            {
                var ws = new WebSocket("localhost:8080/car/socket");
                ws.onopen = function()
                {
                    ws.send($("#message").val());
                };
                ws.onmessage = function (evt)
                {
                    alert("Message is received...");
                    var received_msg = evt.data;
                    $("#showmessage").html(received_msg);
                };
                ws.onclose = function()
                {
                    // websocket is closed.
                    alert("Connection is closed...");
                };
            }
            else
            {
                alert("WebSocket NOT supported by your Browser!");
            }
        }
    </script>

    <ui:define name="content">
        <div class="pill login-pill" id="loginPill">
            <h3>Car Simulator - Simulation</h3>
            <c:choose>
                <c:when test="#{carBean.file != null}">
                    Simulation file has been uploaded, ready to run the simulation!
                </c:when>
                <c:otherwise>
                    Simulation file has not yet been uploaded. Go to the setup page first to upload a simulation file.
                </c:otherwise>
            </c:choose>
        </div>
    </ui:define>

</ui:composition>

